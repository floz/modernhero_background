var Contact,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Contact = (function() {
  Contact.prototype._$base = null;

  Contact.prototype._$main = null;

  Contact.prototype._$btClose = null;

  Contact.prototype._opened = false;

  function Contact() {
    this._closeClickHandler = __bind(this._closeClickHandler, this);
    this._$base = $("#contact");
    this._$main = $("#main");
    this._$btClose = $("#bt_close_contact");
  }

  Contact.prototype.show = function() {
    if (this._opened) {
      return;
    }
    this._opened = true;
    this._$base.css("display", "block");
    this._$main.css("bottom", "105px");
    return this._$btClose.click(this._closeClickHandler);
  };

  Contact.prototype._closeClickHandler = function(e) {
    e.preventDefault();
    return this.hide();
  };

  Contact.prototype.hide = function() {
    if (!this._opened) {
      return;
    }
    this._opened = false;
    this._$base.css("display", "none");
    return this._$main.css("bottom", 0);
  };

  return Contact;

})();

var Gallery,
  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

Gallery = (function() {
  Gallery.prototype._$base = null;

  Gallery.prototype._$layer = null;

  Gallery.prototype._$btClose = null;

  Gallery.prototype._opened = false;

  function Gallery() {
    this._closeClickHandler = __bind(this._closeClickHandler, this);
    this._$base = $("#gallery");
    this._$layer = $("#layer");
    this._$btClose = $("#bt_close_gallery");
  }

  Gallery.prototype.show = function() {
    if (this._opened) {
      return;
    }
    this._opened = true;
    this._$base.css("display", "block");
    this._$layer.css("display", "block");
    return this._$btClose.click(this._closeClickHandler);
  };

  Gallery.prototype._closeClickHandler = function(e) {
    e.preventDefault();
    return this.hide();
  };

  Gallery.prototype.hide = function() {
    if (!this._opened) {
      return;
    }
    this._opened = false;
    this._$base.css("display", "none");
    return this._$layer.css("display", "none");
  };

  return Gallery;

})();

var Main;

$(function() {
  return new Main();
});

Main = (function() {
  Main.prototype._$background = null;

  Main.prototype._$background_sky = null;

  Main.prototype._$background_ground = null;

  Main.prototype._$lines = null;

  Main.prototype._heights = null;

  Main.prototype._speeds = null;

  Main.prototype._delays = null;

  function Main() {
    var $line, line, _i, _len, _ref;
    this._$background = $("#background");
    this._$background_sky = $("#background_sky");
    this._$background_ground = $("#background_ground");
    this._$lines = this._$background_sky.find(".background__line");
    this._heights = [];
    _ref = this._$lines;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      line = _ref[_i];
      $line = $(line);
      this._heights.push($line.height());
      $line.height(0);
    }
    this._$background_ground.css("bottom", "-130px");
    this._$background_sky.css("bottom", "-300px");
    this._showLines();
  }

  Main.prototype._showLines = function() {
    var idx, line, ratio, speed, _i, _len, _ref;
    this._speeds = [6, 4, 3, 2.8, 2.7, 2.5, 2.3];
    this._delays = [0, 2, 3, 3.5, 4, 4.25, 4.5];
    ratio = .5;
    idx = 0;
    speed = 1;
    _ref = this._$lines;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      line = _ref[_i];
      TweenLite.to(line, this._speeds[idx] * ratio, {
        height: this._heights[idx] + "px",
        delay: this._delays[idx] * ratio,
        ease: Quad.easeOut
      });
      idx++;
    }
    TweenLite.to(this._$background_sky, 5.5 * ratio, {
      bottom: 0
    });
    return TweenLite.to(this._$background_ground, 4 * ratio, {
      bottom: 0,
      delay: 3 * ratio,
      ease: Quad.easeOut
    });
  };

  return Main;

})();
